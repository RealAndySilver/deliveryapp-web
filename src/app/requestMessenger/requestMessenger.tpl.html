<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Solicitar Servicio</h1>
    </div>
</div>
<form name="requestMessengerForm" novalidate>
	<div class="row">
		<div class="col-lg-6">
			<div class="row">
				<div class="col-sm-12">
					<div class="form-group input-group">
		                <label class="input-group-addon" for="servName">Nombre de Servicio</label>
		                <input type="text" class="form-control" id="servName" name="servName" ng-model="model.delivery.item_name" required>
		            </div>
	        	</div>
        	</div>
            <div class="row">
            	<div class="col-sm-12">
            		<div class="panel panel-default">
                        <div class="panel-heading"><b>Direcciones</b></div>
                        <div class="panel-body">
                        	<div class="form-group input-group">
				                <label class="input-group-addon" for="pickup">Recogida</label>
				                <input type="text" class="form-control" id="pickup" ng-model="pickup_address" required>
				                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="modal.getPositionBy(pickup_address)"><i class="fa fa-search"></i></button>
                                </span>
                          	</div>
							<div class="form-group">
								<input type="text" class="form-control" ng-model="model.delivery.pickup_details" placeholder="Apto, conjunto, Edificio de Recogida (opcional)">
							</div>
                          	<div class="form-group input-group">
				                <label class="input-group-addon" for="delivery">Entrega</label>
				                <input type="text" class="form-control" id="delivery" ng-model="delivery_address" required>
				                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="modal.getPositionBy(delivery_address)"><i class="fa fa-search"></i></button>
                                </span>
				            </div>
							<div class="form-group">
								<input type="text" class="form-control" ng-model="model.delivery.delivery_details" placeholder="Apto, conjunto, Edificio de Entrega (opcional)">
							</div>
				            <div class="form-group">
				            	<delivery-map class="map-container" callback="setLatLong(lat1, lon1,lat2, lon2,valueBool)" messengers="model.messengers" delivery="model.delivery" pickup="model.pickup"></delivery-map>
				            </div>
		            		<div class="panel panel-default">
		                        <div class="panel-heading"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="model.isShowing('showAddressBool')">Historial de Direcciones</button></div>
		                        <div class="panel-body" ng-show="model.showAddressBool">
				            		<label class="titleField">Direcciones de Recogida</label>
									<ul>
										<li ng-repeat="pickup in model.pickUpAddressSave">
											<spam class="textField">{{pickup.address}}</spam>
											<span style="float: right;">
												<a class="textfield" href="" ng-click="useAddress('pickup', pickup)">Recogida</a> | 
												<a class="textfield" href="" ng-click="useAddress('delivery', pickup)">Entrega</a>
											</span>
										</li>
									</ul>
									<label class="titleField" >Direcciones de Entrega</label>
									<ul>
										<li ng-repeat="delivery in model.deliveryAddressSave">
											<spam class=" textField">{{delivery.address}}</spam>
											<span style="float: right;">
												<a class="textfield" href="" ng-click="useAddress('pickup', delivery)">Recogida</a> | 
												<a class="textfield" href="" ng-click="useAddress('delivery', delivery)">Entrega</a>
											</span>
										</li>
									</ul>
								</div>
							</div>
                        </div>
                    </div>
                </div>
            </div>
		</div>
		<div class="col-lg-6">
			<div class="row">
            	<div class="col-sm-6">
	            	<div class="panel panel-default">
                        <div class="panel-heading"><b>Momento de Recogida</b></div>
                        <div class="panel-body">
                        	<label class="radio-inline">
		                        <input type="radio" name="momentoRecogida" ng-model="model.delivery.time_to_deliver" value="now" required><i class="fa fa-flash"></i> Inmediato
		                    </label>
		                    <label class="radio-inline">
		                        <input type="radio" name="momentoRecogida" ng-model="model.delivery.time_to_deliver" value="later"><i class="fa icon-time"></i> Durante el día
		                    </label>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-default">
                        <div class="panel-heading"><b>Momento de Entrega</b></div>
                        <div class="panel-body">
                        	<label class="radio-inline">
		                        <input type="radio" name="momentoEntrega" ng-model="model.delivery.time_to_pickup" value="now" required><i class="icon-large fa-flash"></i> Inmediato
		                    </label>
		                    <label class="radio-inline">
		                        <input type="radio" name="momentoEntrega" ng-model="model.delivery.time_to_pickup" value="later"><i class="icon-large icon-time"></i> Durante el día
		                    </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
            	<div class="col-sm-12">
		            <div class="form-group input-group">
		                <label class="input-group-addon" for="sendImg">
		                	<input type="checkbox" id="sendImg" ng-model="model.delivery.send_image">
		                </label>
		                <label class="form-control" for="sendImg">
                            <i class="fa fa-picture-o"></i> Foto Obligatoria
                        </label>
		            </div>
		            <div class="form-group input-group">
		                <label class="input-group-addon" for="sendSignature">
		                	<input type="checkbox" id="sendSignature" ng-model="model.delivery.send_signature">
		                </label>
		                <label class="form-control" for="sendSignature">
                            <i class="fa fa-edit"></i> Firma Obligatoria
                        </label>
		            </div>

		            <div class="panel panel-default">
                        <div class="panel-heading">
                        	<button type="button" class="btn btn-default btn-sm btn-block" tabindex="0" ng-click="model.isShowing('showOptionsEnsurances')"><b>Asegurar Servicio</b></button>
                        </div>
                        <div class="panel-body" ng-show="model.showOptionsEnsurances">
							<div class="form-group">
								<select class="form-control" ng-model="model.delivery.ensurancevalue" ng-init="model.delivery.ensurancevalue='0'">
									<option value="0">Selecciona el valor del seguro</option>
									<option value="100000">100.000</option>
									<option value="200000">200.000</option>
									<option value="300000">300.000</option>
									<option value="400000">400.000</option>
									<option value="500000">500.000</option>
									<option value="600000">600.000</option>
									<option value="700000">700.000</option>
									<option value="800000">800.000</option>
									<option value="900000">900.000</option>
									<option value="1000000">1.000.000</option>
									<option value="1100000">1.100.000</option>
									<option value="1200000">1.200.000</option>
									<option value="1300000">1.300.000</option>
									<option value="1400000">1.400.000</option>
									<option value="1500000">1.500.000</option>
									<option value="1600000">1.600.000</option>
									<option value="1700000">1.700.000</option>
									<option value="1800000">1.800.000</option>
									<option value="1900000">1.900.000</option>
									<option value="2000000">2.000.000</option>
								</select>
                        	</div>

                        </div>
                    </div>
					</div>

				<div class="col-sm-12">
					<div class="panel panel-default">
						<div class="panel-heading"><b>Método de pago</b></div>
						<div class="panel-body">
							<label class="radio-inline">
								<input type="radio" name="metodoPago" ng-model="model.delivery.payment_method" value="cash" required><i class="fa fa-money"></i> Efectivo
							</label>
							<label class="radio-inline">
								<input type="radio" name="metodoPago" ng-model="model.delivery.payment_method" value="credit"><i class="fa  fa-credit-card"></i> Crédito
							</label>
						</div>
					</div>
            		<!--<div class="panel panel-default" id="billing-request-block" ng-show="model.delivery.payment_method === 'credit'">
            			<div class="panel-body">
            				<div ng-repeat="p in model.currentBillingInformation" class="panel-body">
								<span>Titular tarjeta: {{p.cardHolderName}}<input class="pull-right" type="radio" name="card_{{p.value}}" ng-model="model.delivery.card" value="{{p.value}}"></span>
								<br>
								<span><b class="bold-block-info">{{p.cardNumber}}</b> Exp: {{p.expiryMonth}}/{{p.expiryYear}}</span>
							</div>
            			</div>
            		</div>-->
					<div class="panel panel-default">
						<div class="panel-heading"><b>Instrucciones para el mensajero</b></div>
						<div class="panel-body">
							<textarea class="form-control" ng-model="model.delivery.instructions" required></textarea>
						</div>
					</div>
				</div>
				<br>
				<div class="col-sm-12">
                    <div class="alert alert-success">
						<span layout-align="center center">Valor del seguro elegido: <span ng-show="currency">COP</span> <strong>$ {{model.delivery.ensurancevalue}}</strong></span><br>
						<span layout-align="center center">Costo del servicio: <span ng-show="currency">COP</span> <strong>$ {{deliveryPrice}}</strong></span><br>
						<!--<span layout-align="center center">VALOR APROXIMADO DEL SERVICIO</span>-->
					    <!--<span layout-align="center center" id="value_delivery">-->
					    	<!--<span ng-show="currency">COP</span> <strong>$ {{deliveryPrice}}</strong>-->
					    <!--</span>-->
	            	</div>
            	</div>
            	
            </div>
		</div>
	</div>
	<div class="row form-group">
		<button type="submit" class="btn btn-success btn-lg btn-block" ng-click="model.requestMessenger()">Solicitar</button>
	</div>
</form>
<!--<bs-modal label-accept-button="Ok" directory="assets/js/modal/templates" template="addresslist"></bs-modal>-->

<div class="modal sign-up-modal billing-container" id="addBilling" ng-show="model.showBillingModal">
	<div class="content clearfix model-dialog" role="document">
		<form class="form-horizontal modal-content" role="form" name="addBilingForm" novalidate>
			<fieldset>
			  <legend>Agregar tarjeta</legend>
			  <div class="form-group">
				<label class="col-sm-4 control-label" for="card-holder-name">Titular tarjeta</label>
				<div class="col-sm-6">
				  <input type="text" ng-model="model.billingInformation.cardHolderName" class="form-control" name="card-holder-name" id="card-holder-name" maxlength="50" placeholder="Titular tarjeta">
				</div>
			  </div>
			  <div class="form-group" ng-if="!model.isEditing">
				<label class="col-sm-4 control-label" for="card-number">Número tarjeta</label>
				<div class="col-sm-6">
				  <input type="text" ng-model="model.billingInformation.cardNumber" ng-change="model.getFranchise(model.billingInformation.cardNumber)" ng-pattern="/^([0-9]| )+$/" maxlength="16" class="form-control" name="cardNumber" id="card-number" placeholder="Número tarjeta">
				</div>
				<img src="assets/img/billing/american.png" ng-show="model.currentFranchise === 'AM'">
				<img src="assets/img/billing/dinners.png" ng-show="model.currentFranchise === 'DI'">
				<img src="assets/img/billing/mastercard.png" ng-show="model.currentFranchise === 'MC'">
				<img src="assets/img/billing/visa.png" ng-show="model.currentFranchise === 'VI'">
				<img src="assets/img/billing/visaelectron.png" ng-show="model.currentFranchise === 'VE'">
			  </div>
			  <p ng-show="addBilingForm.cardNumber.$error.pattern && !addBilingForm.cardNumber.$pristine" class="text-danger info-fix">Ingresa un número de tarjeta válido.</p>
			  <div class="form-group">
				<label class="col-sm-4 control-label fix-label" for="expiry-month">Fecha vencimiento</label>
				<div class="col-sm-6">
				  <div class="row">
					<div class="col-xs-5">
					  <select class="form-control col-sm-2" ng-model="model.billingInformation.expiryMonth" name="expiry-month" id="expiry-month">
						<option ng-if="!model.billingInformation.expiryMonth" value="" selected>Mes</option>
						<option value="01">Ene (01)</option>
						<option value="02">Feb (02)</option>
						<option value="03">Mar (03)</option>
						<option value="04">Abr (04)</option>
						<option value="05">May (05)</option>
						<option value="06">Jun (06)</option>
						<option value="07">Jul (07)</option>
						<option value="08">Ago (08)</option>
						<option value="09">Sep (09)</option>
						<option value="10">Oct (10)</option>
						<option value="11">Nov (11)</option>
						<option value="12">Dic (12)</option>
					  </select>
					</div>
					<div class="col-xs-5">
					  <select class="form-control" ng-model="model.billingInformation.expiryYear" name="expiry-year">
					  	<option ng-if="!model.billingInformation.expiryYear" value="" selected>Año</option>
						<option value="13">2013</option>
						<option value="14">2014</option>
						<option value="15">2015</option>
						<option value="16">2016</option>
						<option value="17">2017</option>
						<option value="18">2018</option>
						<option value="19">2019</option>
						<option value="20">2020</option>
						<option value="21">2021</option>
						<option value="22">2022</option>
						<option value="23">2023</option>
					  </select>
					</div>
				  </div>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-4 control-label" for="cvv">Código CVV</label>
				<div class="col-sm-4">
				  <input type="text" class="form-control" ng-pattern="/^([0-9]| )+$/" maxlength="4" ng-model="model.billingInformation.securityCode" name="cvv" id="cvv" placeholder="Código seguridad">
				</div>
			  </div>
			  <p ng-show="addBilingForm.cvv.$error.pattern && !addBilingForm.cvv.$pristine" class="text-danger info-fix">Ingresa un código de seguridad válido.</p>
			  <div class="form-group">
				<div class="add-block-button col-sm-9">
				  <button type="button" class="btn btn-success" ng-click="model.addBillingInformation(model.billingInformation)" ng-disabled="addBilingForm.$invalid" data-dismiss="modal">Agregar</button>
				  <button type="button" class="btn btn-danger"data-dismiss="modal" ng-hide="!model.isEditing">Eliminar</button>
				  <button type="button" class="btn btn-danger"data-dismiss="modal" ng-hide="model.isEditing" ng-click="model.skipBilling()">Agregar después</button>
				</div>
			  </div>
			</fieldset>
	    </form>
	</div>
</div>
